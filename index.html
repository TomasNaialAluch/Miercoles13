<!doctype html>
<html lang="es" data-theme="dark">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>Rutinas ‚Äì Piernas & Hombros</title>
<style>
  :root{
  --bg:#0f1115; --panel:#161a22; --muted:#8b93a7; --text:#eef2ff;
  --accent:#6ee7b7; --accent2:#60a5fa; --danger:#f87171;
  --chip:#222738; --chipDone:#1f2937; --border:#202636;
  --btn:#1c2232; --btn2:#151a27;
}
[data-theme="light"]{
  --bg:#f6f7fb; --panel:#ffffff; --muted:#5b647a; --text:#0f1524;
  --accent:#0fb981; --accent2:#2563eb; --danger:#ef4444;
  --chip:#eef2ff; --chipDone:#e5efe9; --border:#dde3f1;
  --btn:#eef2ff; --btn2:#f2f4f8;
}
html,body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
  font-size:16px;
  line-height:1.5;
}
header{
  position:sticky;
  top:0;
  background:linear-gradient(180deg,var(--bg),color-mix(in oklab, var(--bg) 85%, transparent));
  padding:12px 18px 8px;
  backdrop-filter:saturate(1.2) blur(4px);
  z-index:5;
  border-bottom:1px solid var(--border)
}
h1{
  font-size:22px;
  margin:0 0 6px
}
.tabs{
  display:flex;
  gap:8px;
}
.tab{
  flex:1;
  text-align:center;
  padding:10px 12px;
  border-radius:10px;
  background:var(--panel);
  color:var(--muted);
  font-weight:600;
  border:1px solid var(--border);
  font-size:15px;
  transition:background 0.2s;
}
.tab.active{
  color:var(--text);
  outline:2px solid color-mix(in oklab, var(--accent2) 30%, transparent)
}
.themeToggle{
  padding:8px 12px;
  border-radius:10px;
  background:var(--panel);
  border:1px solid var(--border);
  color:var(--muted);
  font-weight:700;
  font-size:16px;
}
main{
  padding:12px 12px 80px;
  max-width:480px;
  margin:auto;
}
.section{
  margin:18px 0 24px;
}
.section h2{
  font-size:17px;
  margin:0 0 10px;
  color:var(--accent2)
}
.exercise{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:12px;
  padding:14px;
  margin-bottom:12px;
  box-shadow:0 1px 4px #0002;
  transition:box-shadow 0.2s;
}
.ex-head{
  display:flex;
  justify-content:space-between;
  gap:10px;
  align-items:flex-start;
  margin-bottom:8px
}
.ex-title{
  font-size:15px;
  font-weight:700
}
.ex-note{
  font-size:13px;
  color:var(--muted);
  line-height:1.3
}
.sets{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-bottom:6px;
}
.set{
  padding:8px 10px;
  border-radius:999px;
  background:var(--chip);
  border:1px solid var(--border);
  font-size:13px;
  cursor:pointer;
  transition:background 0.2s;
}
.set.done{
  background:var(--chipDone);
  color:#0c5130;
  border-color:color-mix(in oklab, var(--accent) 30%, var(--border));
  text-decoration:line-through
}
.meta{
  font-size:12px;
  color:var(--muted);
  margin-top:6px;
  display:flex;
  gap:8px;
  align-items:center;
  flex-wrap:wrap
}
.pill{
  padding:5px 10px;
  border-radius:999px;
  background:color-mix(in oklab, var(--chip) 70%, var(--panel));
  border:1px solid var(--border);
  font-size:12px;
  color:var(--muted)
}
.link{
  padding:5px 10px;
  border-radius:999px;
  background:var(--btn2);
  border:1px solid var(--border);
  font-size:12px;
  color:var(--text);
  cursor:pointer
}
.footerBar{
  position:fixed;
  left:0;right:0;bottom:0;
  background:var(--panel);
  border-top:1px solid var(--border);
  padding:10px 12px;
  display:flex;
  gap:8px;
  z-index:4
}
.foot-btn{
  flex:1;
  text-align:center;
  padding:10px;
  border-radius:8px;
  background:var(--btn);
  border:1px solid var(--border);
  color:color-mix(in oklab, var(--accent2) 70%, var(--text));
  font-weight:700;
  font-size:15px;
}
.foot-btn.secondary{
  background:var(--btn2);
  color:var(--muted)
}
.doneAll{
  background:color-mix(in oklab, var(--accent) 20%, var(--btn));
  border-color:color-mix(in oklab, var(--accent) 40%, var(--border));
  color:color-mix(in oklab, var(--accent) 60%, var(--text));
  margin-top:12px;
  font-size:15px;
  padding:12px;
  text-align:center;
}
/* Modal */
.modal .card{
  width:min(480px,96vw);
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:14px;
  padding:14px;
}
.card h3{
  margin:0 0 6px;
  font-size:17px;
}
.bigtime{
  font-size:40px;
  text-align:center;
  margin:10px 0 6px
}
.controls{
  display:flex;
  gap:8px;
  margin-top:8px
}
.btn{
  flex:1;
  padding:10px;
  border-radius:10px;
  border:1px solid var(--border);
  background:var(--btn);
  color:var(--text);
  font-weight:800;
  text-align:center;
  cursor:pointer;
  font-size:15px;
}
.btn.primary{background:var(--accent2);color:white;border:0}
.btn.danger{background:var(--danger);color:white;border:0}
.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
input[type="number"]{
  background:var(--btn2);
  border:1px solid var(--border);
  border-radius:8px;
  padding:8px;
  color:var(--text);
  width:80px;
  font-size:15px
}
.small{font-size:12px;color:var(--muted)}
.segmented{display:flex;border:1px solid var(--border);border-radius:8px;overflow:hidden}
.segmented button{
  flex:1;
  padding:7px 10px;
  background:var(--btn2);
  border:0;
  color:var(--muted);
  font-weight:700;
  font-size:13px;
}
.segmented button.active{background:var(--accent2);color:white}
.chips{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
.chipBtn{
  padding:7px 10px;
  border-radius:999px;
  border:1px solid var(--border);
  background:var(--btn2);
  font-size:13px;
  cursor:pointer
}
/* ...existing code... */
</style>
</head>
<body>
<header>
  <div class="topbar">
    <h1>Rutinas ‚Äì Piernas & Hombros</h1>
    <button class="themeToggle" id="themeBtn" aria-label="Cambiar tema">üåô/‚òÄÔ∏è</button>
  </div>
  <div class="tabs" role="tablist">
    <button class="tab active" id="tab-piernas" role="tab" aria-controls="panel-piernas">Piernas</button>
    <button class="tab" id="tab-hombros" role="tab" aria-controls="panel-hombros">Hombros</button>
  </div>
</header>

<main>
  <section id="panel-piernas" class="section" role="tabpanel" aria-labelledby="tab-piernas"></section>
  <section id="panel-hombros" class="section" role="tabpanel" aria-labelledby="tab-hombros" hidden></section>
</main>

<div class="footerBar">
  <button class="foot-btn" id="btn-reset-dia">Reiniciar d√≠a</button>
  <button class="foot-btn secondary" id="btn-info">Consejos</button>
</div>

<!-- MODAL TIMER -->
<div class="modal" id="timerModal" aria-hidden="true">
  <div class="card" role="dialog" aria-modal="true" aria-labelledby="timerTitle">
    <h3 id="timerTitle">Temporizador</h3>
    <div class="small" id="timerSubtitle"></div>

    <div class="row" style="justify-content:center;gap:6px;margin-top:6px">
      <div class="segmented" role="tablist" aria-label="Modo de temporizador">
        <button id="modeWork" class="active" role="tab" aria-selected="true">Trabajo</button>
        <button id="modeRest" role="tab" aria-selected="false">Descanso</button>
      </div>
      <span class="pill" id="pillDefault">Por defecto</span>
      <span class="pill" id="pillHint">Toc√° Start</span>
    </div>

    <div class="bigtime" id="timeDisplay">00:45</div>

    <div class="row" style="margin:4px 0 6px">
      <label>Segundos:</label>
      <input type="number" id="secsInput" min="0" step="5" value="45" />
      <button class="btn" id="btn-apply">Aplicar</button>
    </div>

    <div class="chips" id="presetChips"></div>

    <div class="controls">
      <button class="btn primary" id="btn-start">Start</button>
      <button class="btn" id="btn-pause">Pausa</button>
      <button class="btn danger" id="btn-reset">Reiniciar</button>
    </div>
  </div>
</div>

<script>
/* ===== Datos ===== */
const routines = {
  "Piernas": [
    { name:"Bici est√°tica", details:"8 min ‚Äì intensidad baja-media (calentamiento)", restSec:0, sets:["8 min"] },
    { name:"Movilidad + activaci√≥n gl√∫teos", details:"7 min", restSec:0, sets:["7 min"] },
    { name:"Cossacks", details:"4 series", restSec:90, sets:["16 kg √ó 10","16 kg √ó 8","24 kg √ó 8","24 kg √ó 6"] },
    { name:"Sentadilla haka + gemelos", details:"3√ó 6‚Äì8 rep", restSec:120, sets:["20 kg √ó 6‚Äì8","30 kg √ó 6‚Äì8","40 kg √ó 6‚Äì8"] },
    { name:"Prensa inclinada enjaca", details:"4 series en pir√°mide", restSec:105, sets:["12 rep (medio)","10 rep (medio-alto)","8 rep (alto)","6 rep (m√°x para 6)"] },
    { name:"Peso muerto rumano con barra", details:"3√ó 8‚Äì10 rep ¬∑ espalda recta", restSec:90, sets:["Serie 1 (8‚Äì10)","Serie 2 (8‚Äì10)","Serie 3 (8‚Äì10)"] },
    { name:"Sill√≥n cu√°driceps (extensiones)", details:"3√ó 12‚Äì15 rep ¬∑ subida r√°pida, bajada controlada", restSec:60, sets:["Serie 1 (12‚Äì15)","Serie 2 (12‚Äì15)","Serie 3 (12‚Äì15)"] },
    { name:"Sill√≥n isquios (curl femoral)", details:"3√ó 12‚Äì15 rep ¬∑ subida controlada, bajada lenta", restSec:60, sets:["Serie 1 (12‚Äì15)","Serie 2 (12‚Äì15)","Serie 3 (12‚Äì15)"] }
  ],
  "Hombros": [
    { name:"Entrada en calor", details:"5 min: rotaciones, c√≠rculos, band pull-aparts, press liviano", restSec:0, sets:["5 min"] },
    { name:"Flexiones pike", details:"3√ó 8‚Äì12 rep (fallo t√©cnico). √öltima opcional: HSPU asistido", restSec:75, sets:["Serie 1 (8‚Äì12)","Serie 2 (8‚Äì12)","Serie 3 (8‚Äì12)"] },
    { name:"Press militar (barra o mancuernas)", details:"3√ó 8‚Äì10 rep ¬∑ peso moderado-alto", restSec:90, sets:["Serie 1 (8‚Äì10)","Serie 2 (8‚Äì10)","Serie 3 (8‚Äì10)"] },
    { name:"Vuelos laterales (mancuernas)", details:"3√ó 12‚Äì15 rep ¬∑ t√©cnica estricta", restSec:50, sets:["Serie 1 (12‚Äì15)","Serie 2 (12‚Äì15)","Serie 3 (12‚Äì15)"] },
    { name:"Chin-ups supinas", details:"3√ó al fallo controlado (6‚Äì10 rep)", restSec:90, sets:["Serie 1","Serie 2","Serie 3"] }
  ]
};

/* ===== Claves, estado ===== */
const PREFS_REST_KEY = "restPrefsV1";     // { "Piernas:3": 120, ... }
const PREFS_WORK_KEY = "workPrefsV1";     // { "Piernas:3": 45, ... }
const THEME_KEY = "themePref";
const restPrefs = JSON.parse(localStorage.getItem(PREFS_REST_KEY) || "{}");
const workPrefs = JSON.parse(localStorage.getItem(PREFS_WORK_KEY) || "{}");

const todayKey = (() => { const d=new Date(); return `rutina-${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`; })();
let progress = JSON.parse(localStorage.getItem(todayKey) || "{}");

/* ===== Helpers ===== */
function $(q,scope=document){return scope.querySelector(q)}
function el(tag, attrs={}, ...children){
  const e=document.createElement(tag);
  Object.entries(attrs).forEach(([k,v])=>{
    if(k==='class') e.className=v;
    else if(k.startsWith('on') && typeof v==='function') e.addEventListener(k.slice(2), v);
    else if(k==='html') e.innerHTML=v;
    else e.setAttribute(k,v);
  });
  for(const c of children){ e.append(c?.nodeType?c:document.createTextNode(c??"")); }
  return e;
}
function saveProgress(){ localStorage.setItem(todayKey, JSON.stringify(progress)); }
function savePrefs(){ localStorage.setItem(PREFS_REST_KEY, JSON.stringify(restPrefs)); localStorage.setItem(PREFS_WORK_KEY, JSON.stringify(workPrefs)); }

/* ===== Tema ===== */
(function initTheme(){
  const saved = localStorage.getItem(THEME_KEY);
  if(saved){ document.documentElement.setAttribute('data-theme', saved); }
  else if(window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches){
    document.documentElement.setAttribute('data-theme','light');
  }
})();
$("#themeBtn").addEventListener("click", () => {
  const curr = document.documentElement.getAttribute('data-theme') || 'dark';
  const next = curr === 'dark' ? 'light' : 'dark';
  document.documentElement.setAttribute('data-theme', next);
  localStorage.setItem(THEME_KEY, next);
});

/* ===== Render ===== */
function getRestSeconds(routineName, exIndex){
  const k=`${routineName}:${exIndex}`;
  return restPrefs[k] ?? routines[routineName][exIndex].restSec ?? 60;
}
function getWorkSeconds(routineName, exIndex){
  const k=`${routineName}:${exIndex}`;
  // Por defecto razonable de trabajo: 45s (TUT) si no hay preferencia
  return workPrefs[k] ?? 45;
}

function renderPanel(name, container){
  container.innerHTML = "";
  container.append(el('h2', {}, name));
  routines[name].forEach((ex, idx) => {
    const exKey = `${name}:${idx}`;
    if(!progress[exKey]) progress[exKey] = { done: Array(ex.sets.length).fill(false) };

    const box = el('div', {class:'exercise'});
    const head = el('div', {class:'ex-head'},
      el('div', {},
        el('div', {class:'ex-title'}, ex.name),
        el('div', {class:'ex-note'}, ex.details)
      ),
      el('div', {style:'text-align:right;display:flex;gap:6px;align-items:center;flex-wrap:wrap'},
        el('span', {class:'pill'}, `Trabajo: ${getWorkSeconds(name, idx)}s`),
        el('span', {class:'pill'}, `Descanso: ${getRestSeconds(name, idx)}s`),
        el('button', {class:'link', onclick:()=>editDurations(name,idx)}, "Editar")
      )
    );

    const setsWrap = el('div', {class:'sets'});
    ex.sets.forEach((label, sidx) => {
      const done = progress[exKey].done[sidx];
      const chip = el('span', {class:'set'+(done?' done':''), role:'button', 'aria-pressed':done},
        el('button', {onclick: () => onSetClick(name, idx, sidx, label)}, label)
      );
      setsWrap.append(chip);
    });

    const meta = el('div', {class:'meta'},
      el('span', {class:'pill'}, "Toc√° una serie para marcarla y abrir el temporizador."),
      el('span', {class:'pill'}, "Progreso por d√≠a ¬∑ Preferencias permanentes.")
    );

    box.append(head, setsWrap, meta);
    container.append(box);
  });
}
renderPanel("Piernas", $("#panel-piernas"));
renderPanel("Hombros", $("#panel-hombros"));

/* ===== Tabs ===== */
$("#tab-piernas").addEventListener("click", () => {
  $("#tab-piernas").classList.add("active");
  $("#tab-hombros").classList.remove("active");
  $("#panel-piernas").hidden = false;
  $("#panel-hombros").hidden = true;
});
$("#tab-hombros").addEventListener("click", () => {
  $("#tab-hombros").classList.add("active");
  $("#tab-piernas").classList.remove("active");
  $("#panel-hombros").hidden = false;
  $("#panel-piernas").hidden = true;
});

/* ===== Editor de duraciones ===== */
function editDurations(routineName, exIndex){
  const k=`${routineName}:${exIndex}`;
  const w=prompt(`Segundos de TRABAJO para "${routines[routineName][exIndex].name}"`, getWorkSeconds(routineName, exIndex));
  if(w===null) return;
  const wr = Math.max(0, Math.floor(Number(w)));
  if(Number.isNaN(wr)) return alert("Trabajo: ingres√° un n√∫mero v√°lido.");

  const r=prompt(`Segundos de DESCANSO para "${routines[routineName][exIndex].name}"`, getRestSeconds(routineName, exIndex));
  if(r===null) return;
  const rr = Math.max(0, Math.floor(Number(r)));
  if(Number.isNaN(rr)) return alert("Descanso: ingres√° un n√∫mero v√°lido.");

  workPrefs[k]=wr; restPrefs[k]=rr; savePrefs();
  const container = routineName === "Piernas" ? $("#panel-piernas") : $("#panel-hombros");
  renderPanel(routineName, container);
}

/* ===== Timer (Trabajo/Descanso) ===== */
let timer = {
  secs: 45, left: 45, id: null, running: false,
  current: {routine:"", exIndex:-1, setLabel:""},
  mode: "work", // "work" | "rest"
  wakeLock: null
};
const modal = $("#timerModal");
const timeDisplay = $("#timeDisplay");
const secsInput = $("#secsInput");
const timerTitle = $("#timerTitle");
const timerSubtitle = $("#timerSubtitle");
const pillDefault = $("#pillDefault");
const chips = $("#presetChips");
const modeWorkBtn = $("#modeWork");
const modeRestBtn = $("#modeRest");

const PRESETS = {
  work: [20,30,40,45,60],
  rest: [45,60,75,90,120]
};

function setMode(mode){
  timer.mode = mode;
  modeWorkBtn.classList.toggle('active', mode==='work');
  modeRestBtn.classList.toggle('active', mode==='rest');
  modeWorkBtn.setAttribute('aria-selected', mode==='work');
  modeRestBtn.setAttribute('aria-selected', mode==='rest');
  const secs = mode==='work' ? getWorkSeconds(timer.current.routine, timer.current.exIndex)
                             : getRestSeconds(timer.current.routine, timer.current.exIndex);
  timer.secs = secs; timer.left = secs;
  secsInput.value = secs;
  pillDefault.textContent = `Por defecto ${mode==='work'?'trabajo':'descanso'}: ${secs}s`;
  timeDisplay.textContent = format(secs);
  renderChips();
}

function renderChips(){
  chips.innerHTML = "";
  PRESETS[timer.mode].forEach(s => {
    const b = el('button', {class:'chipBtn', onclick:()=>applySeconds(s)}, `${s}s`);
    chips.append(b);
  });
}

function format(s){ s=Math.max(0,Math.floor(s)); const m=Math.floor(s/60), ss=s%60; return `${String(m).padStart(2,'0')}:${String(ss).padStart(2,'0')}`; }
function openModal(defMode, title, subtitle){
  timer.mode = defMode; // 'work' o 'rest'
  secsInput.value = 0; // se setea en setMode
  timerTitle.textContent = "Temporizador";
  timerSubtitle.textContent = subtitle || "";
  $("#pillHint").textContent = "Toc√° Start";
  modal.classList.add("show"); modal.setAttribute("aria-hidden","false");
  setMode(defMode);
}
function closeModal(){ pauseTimer(); modal.classList.remove("show"); modal.setAttribute("aria-hidden","true"); }
async function requestWakeLock(){ try{ if('wakeLock' in navigator){ timer.wakeLock = await navigator.wakeLock.request('screen'); } }catch(_){ } }
function beep(){ try{ const ctx=new (window.AudioContext||window.webkitAudioContext)(); const o=ctx.createOscillator(); const g=ctx.createGain(); o.connect(g); g.connect(ctx.destination); o.type='sine'; o.frequency.value=880; g.gain.value=0.05; o.start(); setTimeout(()=>{o.stop(); ctx.close();}, 300);}catch(_){ } }

function startTimer(){ if(timer.running) return; timer.running = true; $("#pillHint").textContent="En curso‚Ä¶"; requestWakeLock(); const start=performance.now(); let last=start;
  const tick=(now)=>{ if(!timer.running) return; const dt=(now-last)/1000; last=now; timer.left-=dt; if(timer.left<=0){ timer.left=0; updateDisplay(); finishTimer(); return; } updateDisplay(); timer.id=requestAnimationFrame(tick); };
  updateDisplay(); timer.id=requestAnimationFrame(tick);
}
function pauseTimer(){ if(!timer.running) return; timer.running=false; if(timer.id) cancelAnimationFrame(timer.id); if(timer.wakeLock){ try{timer.wakeLock.release();}catch(_){ } timer.wakeLock=null; } }
function resetTimer(){ pauseTimer(); timer.left = timer.secs; updateDisplay(); $("#pillHint").textContent = "Listo para iniciar"; }
function updateDisplay(){ timeDisplay.textContent = format(timer.left); }

function finishTimer(){
  pauseTimer();
  timeDisplay.textContent = "00:00";
  $("#pillHint").textContent = timer.mode==='work' ? "¬°Serie completa!" : "¬°Descanso completo!";
  if(navigator.vibrate) navigator.vibrate([80,80,160]);
  beep(); setTimeout(beep,200);
}

function applySeconds(v){
  timer.secs = v; timer.left = v; updateDisplay();
  pillDefault.textContent = `Personalizado: ${v}s`;
  secsInput.value = v;
}

/* Botones modal */
$("#btn-start").addEventListener("click", startTimer);
$("#btn-pause").addEventListener("click", pauseTimer);
$("#btn-reset").addEventListener("click", resetTimer);
$("#btn-apply").addEventListener("click", () => {
  const v = parseInt(secsInput.value,10);
  if(!Number.isFinite(v) || v < 0) return;
  applySeconds(v);
  // Guardar como preferencia de este ejercicio en el modo actual
  const k = `${timer.current.routine}:${timer.current.exIndex}`;
  if(timer.mode==='work') workPrefs[k]=v; else restPrefs[k]=v;
  savePrefs();
});
modeWorkBtn.addEventListener("click", ()=>setMode('work'));
modeRestBtn.addEventListener("click", ()=>setMode('rest'));
modal.addEventListener("click", (e) => { if(e.target === modal) closeModal(); });
document.addEventListener("keydown", (e)=>{ if(e.key==='Escape' && modal.classList.contains('show')) closeModal(); });

/* ===== Interacciones ===== */
function onSetClick(routineName, exIndex, setIndex, label){
  const exKey = `${routineName}:${exIndex}`;
  const was = progress[exKey].done[setIndex];
  progress[exKey].done[setIndex] = !was;
  saveProgress();

  const panel = routineName === "Piernas" ? $("#panel-piernas") : $("#panel-hombros");
  renderPanel(routineName, panel);

  // Al tocar una serie se abre en modo DESCANSO por defecto,
  // pero pod√©s cambiar a "Trabajo" en el conmutador.
  timer.current = {routine:routineName, exIndex, setLabel:label};
  openModal('rest', `${routines[routineName][exIndex].name}`, `${routines[routineName][exIndex].name} ¬∑ ${label}`);
}

/* ===== Botones footer ===== */
$("#btn-reset-dia").addEventListener("click", () => {
  if(!confirm("¬øReiniciar el progreso de HOY?")) return;
  localStorage.removeItem(todayKey);
  progress = {};
  renderPanel("Piernas", $("#panel-piernas"));
  renderPanel("Hombros", $("#panel-hombros"));
});
$("#btn-info").addEventListener("click", () => {
  alert(
`Tips:
‚Ä¢ Toc√° una serie para marcarla y abrir el temporizador.
‚Ä¢ Conmut√° Trabajo/Descanso desde el modal; Start/Pausa/Reiniciar debajo.
‚Ä¢ Ajustes r√°pidos con chips (20‚Äì60s para trabajo, 45‚Äì120s para descanso).
‚Ä¢ Guard√° preferencias por ejercicio con "Aplicar".
‚Ä¢ Progreso por d√≠a; tema claro/oscuro queda guardado; vibraci√≥n y sonido al terminar.`
  );
});

/* ===== ‚ÄúCompletado‚Äù visual ===== */
function refreshDoneStyles(){
  ["Piernas","Hombros"].forEach(r=>{
    const allDone = routines[r].every((ex,idx) => {
      const exKey = `${r}:${idx}`;
      return progress[exKey] && progress[exKey].done.every(Boolean);
    });
    const panel = r==="Piernas" ? $("#panel-piernas") : $("#panel-hombros");
    const existing = panel.querySelector('.doneAll');
    if(allDone && !existing){
      panel.append(el('div',{class:'foot-btn doneAll', role:'status'}, `‚úÖ ${r}: ¬°rutina completa!`));
    }else if(!allDone && existing){
      existing.remove();
    }
  });
}
const observer = new MutationObserver(refreshDoneStyles);
observer.observe(document.body, {childList:true, subtree:true});
refreshDoneStyles();
</script>
</body>
</html>